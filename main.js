(()=>{var e={547:()=>{var e=document.querySelector(".popup__form"),t=(e.querySelector(".popup__input_type_name"),e.querySelector(".form_name__input-error"),"Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы");function o(e,t,o){Array.from(e.querySelectorAll(".form_name__input-error")),t.classList.add("form__input_type_error");var r=t.nextElementSibling;r.textContent=o,r.classList.add("form__input-error_active")}Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){!function(e){document.querySelector(".popup__input_type_name"),document.querySelector(".popup__input_type_description");var r=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");r.forEach((function(c){c.addEventListener("input",(function(){var a;!function(e,r){r.validity.valid?r.validity.patternMismatch?o(e,r,t):function(e,t){var o=t.nextElementSibling;t.classList.remove("form__input_type_error"),o.textContent="",o.classList.remove("form__input-error_active")}(0,r):o(e,r,r.validationMessage)}(e,c),a=n,r.some((function(e){return!e.validity.valid}))?(a.disabled=!0,a.classList.add("btn__submit_inactive")):(a.disabled=!1,a.classList.remove("btn__submit_inactive"))}))}))}(e)}))}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,o),c.exports}(()=>{"use strict";function e(e){"Escape"===e.key&&r(document.querySelector(".popup_is-opened"))}function t(t){t.classList.add("popup_is-opened"),document.addEventListener("keydown",e);var o=t.querySelector(".popup__button");null!==o&&(o.disabled=!0,o.classList.add("btn__submit_inactive")),t.querySelectorAll(".form_name__input-error").forEach((function(e){e.textContent=""}))}function r(t){t.classList.remove("popup_is-opened"),document.removeEventListener("keydown",e)}var n=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},c=function(e){return fetch("https://nomoreparties.co/v1/wff-cohort-10/cards/".concat(e),{method:"DELETE",headers:{authorization:"f9abb9cd-6bca-4f92-b508-e5a8964bae2f"}}).then(n)};function a(e,t,o,r,c,a,u,i,p,l){var d=document.querySelector("#card-template").content.querySelector(".card").cloneNode("true"),s=d.querySelector(".card__description"),_=d.querySelector(".card__image"),f=d.querySelector(".card__like-button"),m=d.querySelector(".card__like-button-likes");function y(){l.forEach((function(e){return e._id==u}))}return _.src=t,_.alt="Пейзаж ".concat(e),s.querySelector(".card__title").textContent=e,m&&(m.textContent="".concat(o)),u===i?d.querySelector(".card__delete-button").addEventListener("click",(function(){r(p),d.remove()})):d.querySelector(".card__delete-button").remove(),_.addEventListener("click",(function(){a(e,t)})),f.addEventListener("click",(function(){y?(f.classList.remove("card__like-button_is-active"),function(e){fetch("https://nomoreparties.co/v1/wff-cohort-10/cards/likes/".concat(e),{method:"DELETE",headers:{authorization:"f9abb9cd-6bca-4f92-b508-e5a8964bae2f"}}).then(n)}(p)):(function(e){fetch("https://nomoreparties.co/v1/wff-cohort-10/cards/likes/".concat(e),{method:"PUT",headers:{authorization:"f9abb9cd-6bca-4f92-b508-e5a8964bae2f"}}).then(n)}(p),f.classList.add("card__like-button_is-active"),m.textContent="".concat(o+1))})),d}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}o(547);var i=document.querySelector(".places__list"),p=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__edit-button"),d=document.querySelector(".popup_type_new-card"),s=d.querySelector(".popup__close"),_=document.querySelector(".popup_type_edit"),f=_.querySelector(".popup__close"),m=document.querySelector(".popup_type_image"),y=m.querySelector(".popup__close"),v=document.querySelector(".profile__info"),b=v.querySelector(".profile__title"),h=v.querySelector(".profile__description"),S=document.querySelector(".popup_type_edit .popup__form"),q=S.querySelector(".popup__input_type_name"),E=S.querySelector(".popup__input_type_description"),L=d.querySelector(".popup__content").querySelector(".popup__form"),g=(document.querySelector(".popup__input_type_card-name"),document.querySelector(".popup__input_type_url"),document.querySelector(".profile__image"),document.querySelector(".popup_type_new-avatar")),k=document.querySelector(".profile__image"),x=g.querySelector(".popup__close"),C=document.querySelector(".popup_type_new-avatar .popup__form"),w=C.querySelector(".popup__input_type_url");function A(e,o){m.querySelector(".popup__image").src=o,m.querySelector(".popup__image").alt="Попап карточки",m.querySelector(".popup__caption").textContent=e,t(m)}L.addEventListener("submit",(function(e){var t,o;e.preventDefault(),i.prepend(a(document.querySelector(".popup__input_type_card-name").value,document.querySelector(".popup__input_type_url").value,"0",c,0,A)),t=document.querySelector(".popup__input_type_card-name").value,o=document.querySelector(".popup__input_type_url").value,fetch("https://nomoreparties.co/v1/wff-cohort-10/cards",{method:"POST",headers:{authorization:"f9abb9cd-6bca-4f92-b508-e5a8964bae2f","Content-Type":"application/json"},body:JSON.stringify({name:t,link:o})}),r(d)})),document.addEventListener("click",(function(e){e.target.classList.contains("popup")&&r(e.target)})),p.addEventListener("click",(function(){t(d)})),s.addEventListener("click",(function(){r(d)})),l.addEventListener("click",(function(){q.value=b.textContent,E.value=h.textContent,t(_)})),f.addEventListener("click",(function(){r(_)})),y.addEventListener("click",(function(){r(m)})),k.addEventListener("click",(function(){t(g)})),x.addEventListener("click",(function(){r(g)})),S.addEventListener("submit",(function(e){var t,o;e.preventDefault(),b.textContent=q.value,h.textContent=E.value,t=q.value,o=E.value,fetch("https://nomoreparties.co/v1/wff-cohort-10/users/me ",{method:"PATCH",headers:{authorization:"f9abb9cd-6bca-4f92-b508-e5a8964bae2f","Content-Type":"application/json"},body:JSON.stringify({name:t,about:o})}),r(_)})),C.addEventListener("submit",(function(e){var t;e.preventDefault(),k.style.backgroundImage="url(".concat(w.value,")"),t=w.value,fetch("https://nomoreparties.co/v1/wff-cohort-10/users/me/avatar",{method:"PATCH",headers:{authorization:"f9abb9cd-6bca-4f92-b508-e5a8964bae2f","Content-Type":"application/json"},body:JSON.stringify({avatar:t})}),r(g)})),_.classList.add("popup_is-animated"),d.classList.add("popup_is-animated"),m.classList.add("popup_is-animated"),Promise.all([fetch("https://nomoreparties.co/v1/wff-cohort-10/cards",{method:"GET",headers:{authorization:"f9abb9cd-6bca-4f92-b508-e5a8964bae2f"}}).then(n),fetch("https://nomoreparties.co/v1/wff-cohort-10/users/me",{method:"GET",headers:{authorization:"f9abb9cd-6bca-4f92-b508-e5a8964bae2f"}}).then(n)]).then((function(e){var t,o,r=(o=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,c,a,u=[],i=!0,p=!1;try{if(c=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;i=!1}else for(;!(i=(r=c.call(o)).done)&&(u.push(r.value),u.length!==t);i=!0);}catch(e){p=!0,n=e}finally{try{if(!i&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(p)throw n}}return u}}(t,o)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?u(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],p=r[1];n.forEach((function(e){i.append(a(e.name,e.link,e.likes.length,c,0,A,e.owner._id,p._id,e._id,Array.from(e.likes))),console.log(e.likes.length)})),console.log(n),b.textContent=p.name,h.textContent=p.about,k.style.backgroundImage="url(".concat(p.avatar,")"),console.log(p)}))})()})();